{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { auth } from \"../utils/firebaseConfig\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext(undefined);\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    var unsubscribe = onAuthStateChanged(auth, function () {\n      var _ref2 = _asyncToGenerator(function* (user) {\n        setUser(user);\n        setLoading(false);\n        if (user) {\n          yield AsyncStorage.setItem('user', JSON.stringify(user));\n        } else {\n          yield AsyncStorage.removeItem('user');\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return unsubscribe;\n  }, []);\n  var login = function () {\n    var _ref3 = _asyncToGenerator(function* (email, password) {\n      try {\n        var userCredential = yield signInWithEmailAndPassword(auth, email, password);\n        setUser(userCredential.user);\n        yield AsyncStorage.setItem('user', JSON.stringify(userCredential.user));\n      } catch (error) {\n        var errorMessages = {\n          'auth/user-not-found': 'No account exists with this email',\n          'auth/wrong-password': 'Incorrect password',\n          'auth/invalid-email': 'Invalid email address',\n          'auth/too-many-requests': 'Too many attempts. Try again later'\n        };\n        throw new Error(errorMessages[error.code] || error.message);\n      }\n    });\n    return function login(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var signup = function () {\n    var _ref4 = _asyncToGenerator(function* (email, password) {\n      try {\n        var userCredential = yield createUserWithEmailAndPassword(auth, email, password);\n        setUser(userCredential.user);\n        yield AsyncStorage.setItem('user', JSON.stringify(userCredential.user));\n      } catch (error) {\n        var errorMessages = {\n          'auth/email-already-in-use': 'An account already exists with this email',\n          'auth/weak-password': 'Password should be at least 6 characters',\n          'auth/invalid-email': 'Invalid email address'\n        };\n        throw new Error(errorMessages[error.code] || error.message);\n      }\n    });\n    return function signup(_x4, _x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        yield signOut(auth);\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function logout() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      loading: loading,\n      login: login,\n      signup: signup,\n      logout: logout\n    },\n    children: !loading && children\n  });\n};\nexport var useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","auth","AsyncStorage","onAuthStateChanged","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","loading","setLoading","unsubscribe","_ref2","_asyncToGenerator","setItem","JSON","stringify","removeItem","_x","apply","arguments","login","_ref3","email","password","userCredential","error","errorMessages","Error","code","message","_x2","_x3","signup","_ref4","_x4","_x5","logout","_ref5","Provider","value","useAuth","context"],"sources":["C:/Users/DeVelizH_003/Documents/budget-app/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { auth } from '../utils/firebaseConfig';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from 'firebase/auth';\r\n\r\ninterface AuthContextType {\r\n  user: any;\r\n  loading: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  signup: (email: string, password: string) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      setUser(user);\r\n      setLoading(false);\r\n      if (user) {\r\n        await AsyncStorage.setItem('user', JSON.stringify(user));\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      setUser(userCredential.user);\r\n      await AsyncStorage.setItem('user', JSON.stringify(userCredential.user));\r\n    } catch (error: any) {\r\n      const errorMessages: { [key: string]: string } = {\r\n        'auth/user-not-found': 'No account exists with this email',\r\n        'auth/wrong-password': 'Incorrect password',\r\n        'auth/invalid-email': 'Invalid email address',\r\n        'auth/too-many-requests': 'Too many attempts. Try again later',\r\n      };\r\n      throw new Error(errorMessages[error.code] || error.message);\r\n    }\r\n  };\r\n\r\n  const signup = async (email: string, password: string) => {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      setUser(userCredential.user);\r\n      await AsyncStorage.setItem('user', JSON.stringify(userCredential.user));\r\n    } catch (error: any) {\r\n      const errorMessages: { [key: string]: string } = {\r\n        'auth/email-already-in-use': 'An account already exists with this email',\r\n        'auth/weak-password': 'Password should be at least 6 characters',\r\n        'auth/invalid-email': 'Invalid email address',\r\n      };\r\n      throw new Error(errorMessages[error.code] || error.message);\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await signOut(auth);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, login, signup, logout }}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}